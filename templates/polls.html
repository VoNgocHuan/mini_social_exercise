{% extends "base.html.j2" %}

{% block content %}
<h1>Polls</h1>

<form method="POST" action="/polls">
    <label for="question">Poll Question:</label>
    <input type="text" id="question" name="question" required>

    <label for="options">Options:</label>
    <div id="options-container">
        <input type="text" name="options" placeholder="Option 1" required>
        <input type="text" name="options" placeholder="Option 2" required>
    </div>
    <button type="button" onclick="addOption()">Add Option</button>

    <button type="submit">Create Poll</button>
</form>

<script>
    function addOption() {
        const container = document.getElementById('options-container');
        const input = document.createElement('input');
        input.type = 'text';
        input.name = 'options';
        input.placeholder = `Option ${container.children.length + 1}`;
        input.required = true;
        container.appendChild(input);
    }
</script>

<hr>

{% for poll in polls %}
<div class="poll">
    <h2>{{ poll.question }}</h2>
    <a href="/polls/{{ poll.id }}">Vote</a>
</div>
{% endfor %}

{% endblock %}